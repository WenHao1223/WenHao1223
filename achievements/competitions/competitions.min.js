const db=firebase.firestore(),firestoreRef=db.collection("public/achievements/competitions"),storageRef=firebase.storage().ref().child("achievements/competitions");function load_ls(){card_html="";for(let i=0;i<eval("ls_"+$("input[name='btnradio']:checked")[0].id).length;i++)firestoreRef.where($("input[name='btnradio']:checked")[0].id,"==",eval("ls_"+$("input[name='btnradio']:checked")[0].id)[i]).get().then((async querySnapshot=>{card_html+=`<h3 class="header mt-4 mb-4">${eval("ls_"+$("input[name='btnradio']:checked")[0].id)[i]}</h3><div class="row g-0">`,await querySnapshot.forEach((async t=>{competitionData=t.data(),card_html+=`<div class="col col-xl-4 col-lg-6 col-md-6 col-sm-12 col-12"><div class="card"><img id="${t.id}" src="" class="card-img-top" alt="${competitionData.name}"><div class="card-body"><h5 class="card-title">${competitionData.name}</h5><p class="card-text">`,award_dict={Gold:"🥇",Silver:"🥈",Bronze:"🥉",Participation:"📃"};for(let t=0;t<competitionData.award.length;t++)competitionData.award[t]in award_dict?card_html+=award_dict[competitionData.award[t]]:card_html+="🏆",card_html+=` ${competitionData.award[t]}<br>`;card_html+=`</p><p class="card-text card_t_des"><i>${competitionData.teammates.join(", ")}</i>`,competitionData.proj&&(card_html+=`<br><i>Project won: ${competitionData.proj}</i>`),card_html+="</p></div></div></div>",storageRef.child(t.id+".png").getDownloadURL().then((e=>{$(`img#${t.id}`).attr("src",e)})).catch((e=>{firebase.storage().ref("achievements/null.png").getDownloadURL().then((e=>{$(`img#${t.id}`).attr("src",e),$(`img#${t.id}`).addClass("d-sm-none"),$(`img#${t.id}`).addClass("d-md-block")})).catch((t=>{console.error("null.png not found: ",t)}))}))})),card_html+="</div>";const tooltipTriggerList=document.querySelectorAll('[data-bs-toggle="tooltip"]'),tooltipList=[...tooltipTriggerList].map((t=>new bootstrap.Tooltip(t)));$(".content").html(card_html)})).catch((t=>{console.error("Error getting documents of level / year of query snapshot of competitions: ",t)}))}ls_level=[],ls_year=[],firestoreRef.orderBy("year").get().then((async t=>{await t.forEach((t=>{ls_level.push(t.data().level),ls_year.push(t.data().year)})),ls_level=Array.from(new Set(ls_level)).sort(),ls_year=Array.from(new Set(ls_year)).reverse(),load_ls()})).catch((t=>{console.error("Error getting list of documents inside query snapshot of competitions:",t)})),$(".btn-group").change((function(){load_ls()}));